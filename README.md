# Проектная работа "Веб-ларек"

Стек: HTML, SCSS, TS, Webpack

Структура проекта:
- src/ — исходные файлы проекта
- src/components/ — папка с JS компонентами
- src/components/base/ — папка с базовым кодом

Важные файлы:
- src/pages/index.html — HTML-файл главной страницы
- src/types/index.ts — файл с типами
- src/index.ts — точка входа приложения
- src/scss/styles.scss — корневой файл стилей
- src/utils/constants.ts — файл с константами
- src/utils/utils.ts — файл с утилитами

## Установка и запуск
Для установки и запуска проекта необходимо выполнить команды

```
npm install
npm run start
```

или

```
yarn
yarn start
```
## Сборка

```
npm run build
```

или

```
yarn build
```

# Описание проекта
---
## Методология разработки
В этом проекте применяется событийно-ориентированный подход, который подразумевает, что взаимодействие между компонентами приложения осуществляется через обмен сообщениями, инициированными определенными событиями.

Также используется архитектурная модель MVP (Model-View-Presenter), которая делит приложение на три ключевых компонента:
- Модель: отвечает за управление данными и бизнес-логикой
- Представление: отображает данные и отправляет действия пользователя презентатору
- Презентатор: получает данные из модели, форматирует их для отображения в представлении и обрабатывает ввод данных пользователем.

# Базовые классы
---
## Класс `Api`

Базовый класс для отправки и получения запросов. В конструктор передается базовый адрес сервера и опциональный объект с заголовками запросов.

`constructor(baseUrl: string, options: RequestInit = {}) `принимает url сервера, по которому будут совершаться запросы и общие опции для запросов

Поля:
- `baseUrl` - базовый адрес сервера
- `options` - объект с заголовками запросов

Методы позволяют обработать запрос, отправить и получить данные.

## Класс `EventEmitter`
Обеспечивает управление событиями, включая установку и снятие слушателей, а также их вызов при возникновении события.
- Методы: добавление и удаление слушателей,вызов событий

## Класс `Component<T>`
Абстрактный класс дженерик, для создания компонентов пользовательского интерфейса.
`constructor(container: HTMLElement)`- принимает элемент контейнера, в который будет помещен компонент

Методы:
- `toggleClass` - метод переключения класса элемента
- `setDisabled` - блокирует или разблокирует переданный элемент в зависимости от значения state (true/false)
- `contentText` - текст для переданного элемента
- `setImage` - установка изображения элемента и его alt-текст

## Класс `Model<T>`
Абстрактный класс дженерик, для расширения класса `Component<T>` и метода привязки события.
`constructor(container: HTMLElement, protected readonly events: IEvents)`- принимает элемент контейнера, в который будет помещен компонент и брокер событий
- Методы: наследуются от класса `Component<T>`

# Компоненты модели данных
---
## Класс `WebLarekAPI`
Является ключевым компонентом для работы с сетевыми запросами в проекте.Наследуется от базового класса `Api` тем самым позволяет ему использовать его функциональность и расширять возможности взаимодействия с Api

Методы:
- `getProductList` - возвращает массив продуктов с сервера
- `orderProducts` - отправляет данные заказа на сервер

## Класс `AppData`
Реализует интерфейс `IStateApp` и управляет состоянием приложения. Содержит методы для работы с данными, такими как добавление и удаление товаров, обновление информации о заказе и валидация форм.

Интерфейс `IStateApp`:
```
interface IStateApp{
    catalog:IProductItem[];
    preview:string;
    basket:string[];
    order:IOrder;
    total:string|number;
}
```
Поля:
- `catalog` - данные списка товаров с сервера
- `preview` - данные товара открытого в превью
- `basket` - данные товара добавленные в корзину
- `order` - данные заказа для отправления на сервер
- `ErrorOrder` - для случая ошибок валидации

# Компоненты представления
---
## Класс `Card`
Отвечает за отображение данных карточки товара в каталоге
Расширяется базовым абстрактным классом `Component<T>` по интерфейсу `ICard`
```
interface ICard {
  title: string;
  category: string;
  image: string;
  price: number;
  text: string;
}
```


## Класс `Page`
Реализует главную страницу, представляющую каталог товаров с функцией счетчика. Включает набор методов-сеттеров для работы с DOM-элементами главной страницы. При нажатии на кнопку корзины генерирует событие basket:open.

```
interface IPage {
  catalog: HTMLElement[]
}
```
## Класс `Basket`
Реализует корзину.Содержит в себе сеттеры для изменения отображения корзины
```
inteface IBasket{
  items:string;
  total:number;
}
```
## Класс `Order`
Отвечает за реализацию компонента формы отправки заказа

```
interface IOrder{
    pay:MethodPay;
    address?:string;
    phone?:string;
    email?:string;
    total:number;
}
```
## Класс `ContactsForm`
Отвечает за реализацию компонента формы контактов

Поля:
- `email` - инпут почты
- `phone` - инпут телефона

## Класс `Success`
Реализация окна с подтверждением заказа 
```
interface ISuccess{
    total:number;
}
```
Поля:
- `close` - кнопка закрытия окна
- `total` - сумма заказа

Сеттеры: 
- `total` - меняет сумму заказа

## Класс `Modal`
Реализация модального окна с помощью методов для управления состояния окна и генерации событий 
```
interface IModal{
    content:HTMLElement[];
}
```
## Класс `Form<T>`
Отвечает за основные способы работы с формой и ее валидацию.
Класс является дженериком и принимает в переменной `<T>` тип данных компонента отображения.

```
interface IForm {
    valid: boolean;
    errors: string[];
  }
```
# Презентер
---
## События изменения данных
- `items:change` - изменение массива товаров каталога
- `preview:change` - изменение товара который откроют в модальном окне 
- `basket:change` - изменение списка товаров в корзине
## События интерфейса 
- `modal:open` - открытие любого модального окна
- `modal:close` - закрытие любого модального окна 
- `basket:open` - открытие модального окна корзины
- `card:select` - выбор карточки
- `order:open` - открытие окна с оформлеием заказа
- `${form}:submit` - отправка формы

## Основные типы и интерфейсы
- `IStateApp` - интерфейс со всеми свойствами продуктов 
- `IBasket` - интерфейс корзины с содержимым и общей стоимостью
- `IOrder` - интерфейс заказа для отправки
- `TOrderForm` - тип формы заказа
- `TContactsForm` - тип формы контактов
- `IResultOrder`- интерфейс результата отправки заказа